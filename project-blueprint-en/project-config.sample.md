# Project Configuration

> **Project parameter file filled in by humans.**
> Consolidates technology choices, quality standards, policies, and other "decisions that humans should make."
>
> **AI-managed areas (not included in this file):**
> - Routing definitions → AI auto-generates in `docs/project.md`
> - Store list → AI auto-generates in `docs/project.md`
> - Data model/schema → AI auto-generates in `docs/data-model.md`
>
> **AI maintenance:**
> Skills (`/implementing-features`, `/plan`, etc.) update Section 11 (Known Pitfalls)
> and Section 2 (Tech Stack) as needed during design and implementation,
> maintaining consistency with `docs/`.

> **This is a sample file.**
> A fully filled example using "TaskFlow" (a task management web app) as the subject.
> For actual projects, copy `project-config.md` and fill it in.

---

## 1. Project Basics <!-- Required -->

| Field | Value |
| --- | --- |
| Project Name | TaskFlow |
| Description | Team task management web app. Supports Kanban and list views, tag management, and deadline management |
| Language | en |
| Node.js Requirement | 20+ |

---

## 2. Tech Stack <!-- Required -->

| Category | Technology |
| --- | --- |
| Framework | React 19, TypeScript 5.x, Vite 6 |
| Styling | Tailwind CSS 4, shadcn/ui |
| State Management | Zustand 5 |
| Validation | Zod 3.x |
| Routing | React Router 7 |
| Icons | lucide-react |
| Code Quality | Biome 2.x |
| Dependency Direction Check | None |
| Git Hooks | husky 9, lint-staged 16 |
| Testing | Vitest 3, Playwright 1.x |

---

## 3. Commands <!-- Required -->

```bash
npm run dev              # Development server (Vite)
npm run build            # Production build
npm run lint             # Biome lint + format check
npm run lint:fix         # Biome lint + format auto-fix
npm run test             # Vitest watch mode
npm run test:run         # Vitest single run
npm run test:coverage    # Test with coverage
npm run e2e              # Playwright E2E tests
npm run e2e:ui           # Playwright UI mode
```

---

## 4. Architecture <!-- Recommended -->

### 4.1 Pattern

Feature-Sliced Design (simplified)

### 4.2 Path Aliases

`@/` → `src/`

### 4.3 Directory Structure (Overview)

```text
src/
├── main.tsx               # Entry point
├── App.tsx                # Routing definitions
├── features/              # Feature modules
│   ├── task/              #   Task CRUD
│   ├── board/             #   Kanban board
│   ├── tag/               #   Tag management
│   └── auth/              #   Authentication (future expansion)
├── shared/                # Shared layer
│   ├── ui/                #   Common UI components
│   ├── hooks/             #   Common hooks
│   └── utils/             #   Utility functions
├── stores/                # Zustand stores
├── test/                  # Test setup
└── lib/                   # External library wrappers
```

### 4.4 Dependency Direction Rules

- `features/X` → `features/Y` direct dependency: Prohibited (coordinate via shared)
- `shared` → `features`: Prohibited
- `stores` → `features`: Prohibited
- Circular dependencies: Prohibited
- Detection command: Visual inspection (dependency-cruiser not installed)

---

## 5. Data Persistence <!-- Optional -->

| Field | Value |
| --- | --- |
| Strategy | localStorage (MVP), with future migration to REST API |
| Storage Key | `taskflow-tasks` (task data), `taskflow-tags` (tag data) |
| Migration Policy | optional + default values for backward compatibility |

---

## 6. Quality Standards <!-- Recommended -->

| Field | Value |
| --- | --- |
| Test Coverage Target | 80% |
| TDD | yes |
| Quality Gates | yes |
| Tool Output Directory | `testreport/` |
| Summary Output Directory | `output/reports/` |

### 6.1 Report Output Structure

Reports are separated into two directories by purpose:

- `testreport/` --- Raw data generated by tools (HTML/JSON/LCOV, etc.). Add to `.gitignore`
- `output/reports/` --- Markdown summaries for human review. Managed in Git

```text
testreport/                    <- Direct tool output (.gitignore target)
├── coverage/              # Unit test coverage (HTML/LCOV)
├── e2e/                   # Playwright E2E test reports and traces
└── security/              # Security scan reports (JSON/HTML)

output/reports/                <- Human-readable summaries (Git-managed)
├── review/                # Code review results
├── test/                  # Test result summaries
├── security/              # Security scan summaries
└── legal/                 # Legal check results
```

---

## 7. Design System <!-- Recommended -->

| Field | Value |
| --- | --- |
| Reference Design System | None (custom) |
| UI Component Library | shadcn/ui (Radix UI) |
| Icon Library | Lucide Icons |
| Accessibility Standard | WCAG 2.1 AA |
| Color Token Definition File | src/index.css |

---

## 8. E2E Testing Environment <!-- Optional -->

| Field | Value |
| --- | --- |
| Browser | Chromium |
| Base URL | http://localhost:5173 |
| Test File Location | e2e/ |
| Test Data Injection Method | Direct localStorage injection |

---

## 9. Git Policy <!-- Optional -->

| Field | Value |
| --- | --- |
| pre-commit | lint-staged (Biome check + format) |
| pre-push | lint + type check + test |
| `--no-verify` | Prohibited |
| `--force` | Prohibited in principle |

---

## 10. Security Policy <!-- Optional -->

- All user input must be validated with Zod
- Dependency vulnerabilities should be checked regularly with `npm audit`
- Do not store passwords or other sensitive information in localStorage
- XSS protection: Rely on React's default escaping; `dangerouslySetInnerHTML` is prohibited

---

## 11. Project-Specific Notes <!-- Recommended -->

> This section is updated by AI as issues are discovered during development.
> Humans may also enter initial values.

### Known Pitfalls

| Issue | Cause | Mitigation |
| --- | --- | --- |
| Type inference fails in Zustand v5 | Not using the double-call pattern with `create` | Always use `create<State>()(impl)` |
| Tailwind CSS 4 class name changes | Some utilities were renamed in v3 → v4 | Refer to the official migration guide |

### Framework-Specific Patterns

- React 19: `use()` hook is available. Recommended to combine with Suspense
- Vite 6: Environment API was introduced, but for SPA use cases, the conventional configuration works fine
- shadcn/ui: Install components with `npx shadcn@latest add <name>`

---

## 12. Claude Code Plugin Settings <!-- Optional -->

| Plugin | Enabled | Purpose |
| --- | --- | --- |
| context7 | yes | Library documentation reference |
| playwright | yes | E2E test execution and debugging |
| draw.io | yes | Architecture diagrams and flow charts |
| pr-review-toolkit | yes | GitHub PR integration |
| sentry | no | Production error investigation (enable as needed) |
