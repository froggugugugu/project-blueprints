# Development Patterns

> **This is a template.** It is empty immediately after setup.
> Content is generated by one of the following methods:
> - Auto-appended when new patterns are discovered via the `/implementing-features` skill
> - Auto-appended when the `/performance` or `/refactoring` skills are executed
> - Auto-generated from Phase 4 onward in the PJM team
>
> **How it's generated**: AI initially generates this based on `project-config.md` sections 2 and 11.
> AI and humans collaboratively maintain it when new patterns or pitfalls are discovered.

A collection of project-specific code conventions, pitfalls, and anti-patterns.
Generic knowledge is not included here.
For route definitions, store lists, directory structure, and schema definitions, refer to `docs/project.md`, `docs/architecture.md`, and `docs/data-model.md`.

---

## 1. State Management

<!-- Based on the state management technology in project-config.md section 2,
     describe patterns for selectors, persistence, migrations, etc. -->

### 1.1 Selector Pitfalls

<!-- Anti-patterns specific to the state management library -->

### 1.2 Persistence Patterns

<!-- Persistence methods and caveats -->

### 1.3 Migrations

<!-- Data migration patterns -->

---

## 2. UI Framework Specifics

<!-- Based on the technologies in project-config.md section 2 "Other",
     describe framework-specific caveats -->

---

## 3. Numeric Precision

<!-- Rules for rounding and precision of numbers handled in the project -->

---

## 4. Data Model Change Conventions

### Adding Schemas

<!-- Conventions for backward compatibility -->

### Migrations

<!-- Conventions for data migrations -->

### Schema Design Patterns

<!-- Patterns for Create / Update derived types, etc. -->

---

## 5. UI Conventions

### Dark Mode

```typescript
// OK: Semantic colors (auto-supported)
className="text-foreground bg-background border-border"

// OK: Dark mode utility classes
className="bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-gray-100"

// NG: Hard-coded color values
style={{ backgroundColor: '#f0f0f0' }}
```

### Component Design

- **Presentational**: Depends only on props, does not reference stores directly
- **Container**: Uses stores/hooks, placed in pages directory or at the top of a feature

### Conditional Styles

<!-- Document the style composition helpers used in the project -->

---

## 6. E2E Test Patterns

### Test Data Injection

<!-- Describe test data injection methods based on project-config.md section 11 -->

### UI Component Interaction Helpers

<!-- Framework-specific UI component interaction patterns -->

---

## 7. Design System

### 7.1 Reference Design System

<!-- Expanded from project-config.md section 7 -->

| Resource | URL | Purpose |
| -------- | --- | ------- |

### 7.2 Color Tokens

<!-- Document the CSS color tokens used in the project -->

### 7.3 Spacing Scale

<!-- Document the spacing scale used -->

### 7.4 Adding Components

<!-- Procedure for adding UI component library components -->

### 7.5 Icon Usage Guidelines

<!-- How to use the icon library -->

---

## 8. Past Issue Log

<!-- Expanded from project-config.md section 11. Append issues discovered during development -->

| Issue | Cause | Solution |
| ----- | ----- | -------- |
