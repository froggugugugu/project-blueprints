# 開発パターン集

> **これはテンプレートです。** セットアップ直後は空の状態です。
> 以下のいずれかの方法で内容が生成されます:
> - `/implementing-features` スキルで新パターン発見時に自動追記
> - `/performance` `/refactoring` スキル実行時に自動追記
> - PJMチームのPhase 4以降で自動生成
>
> **生成方法**: `project-config.md` セクション2, 11 を基にAIが初期生成する。
> 新しいパターンや落とし穴の発見時にAI・人間が協調メンテナンスする。

プロジェクト固有のコード規約・落とし穴・アンチパターンをまとめる。
汎用的な知識はここには含めない。
ルート定義・ストア一覧・ディレクトリ構成・スキーマ定義は `docs/project.md`, `docs/architecture.md`, `docs/data-model.md` を参照。

---

## 1. 状態管理

<!-- project-config.md セクション2「状態管理」の技術に基づき、
     セレクタ、永続化、マイグレーション等のパターンを記述 -->

### 1.1 セレクタの注意点

<!-- 状態管理ライブラリ固有のアンチパターン -->

### 1.2 永続化パターン

<!-- 永続化の方式と注意点 -->

### 1.3 マイグレーション

<!-- データマイグレーションのパターン -->

---

## 2. UIフレームワーク固有

<!-- project-config.md セクション2「その他」の技術に基づき、
     フレームワーク固有の注意点を記述 -->

---

## 3. 数値精度

<!-- プロジェクトで扱う数値の丸め・精度に関するルール -->

---

## 4. データモデル変更時の規約

### スキーマ追加

<!-- 後方互換のための規約 -->

### マイグレーション

<!-- データマイグレーション時の規約 -->

### スキーマ設計パターン

<!-- Create / Update 派生型等のパターン -->

---

## 5. UI 規約

### ダークモード

```typescript
// OK: セマンティックカラー（自動対応）
className="text-foreground bg-background border-border"

// OK: ダークモード対応ユーティリティ
className="bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-gray-100"

// NG: ハードコードされた色値
style={{ backgroundColor: '#f0f0f0' }}
```

### コンポーネント設計

- **Presentational**: props のみに依存、ストアを直接参照しない
- **Container**: ストア/hooks を使用、pages ディレクトリまたは feature のトップに配置

### 条件付きスタイル

<!-- プロジェクトで使用するスタイル合成ヘルパーを記載 -->

---

## 6. E2E テストパターン

### テストデータ注入

<!-- project-config.md セクション11 に基づき、テストデータの注入方法を記述 -->

### UIコンポーネント操作ヘルパー

<!-- フレームワーク固有のUIコンポーネント操作パターン -->

---

## 7. デザインシステム

### 7.1 参照するデザインシステム

<!-- project-config.md セクション7 から展開 -->

| リソース | URL | 用途 |
| -------- | --- | ---- |

### 7.2 カラートークン

<!-- プロジェクトで使用するCSSカラートークンを記載 -->

### 7.3 スペーシングスケール

<!-- 使用するスペーシングスケールを記載 -->

### 7.4 コンポーネント追加手順

<!-- UIコンポーネントライブラリの追加手順 -->

### 7.5 アイコン使用規約

<!-- アイコンライブラリの使用方法 -->

---

## 8. 過去の問題事例

<!-- project-config.md セクション11 から展開。開発中に発見した問題を追記 -->

| 問題 | 原因 | 対策 |
| ---- | ---- | ---- |
