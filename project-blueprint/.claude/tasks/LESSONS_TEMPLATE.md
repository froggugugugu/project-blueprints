# 学びの記録（Lessons Learned）

> AIが開発中に得た学び・修正パターンを蓄積するファイル。
> セッション開始時に確認し、同じミスを繰り返さないようにする。
>
> **使い方**: このテンプレートをプロジェクトルートまたは `.claude/tasks/` にコピーし、
> プロジェクト固有の学びを追記していく。

---

## 記録フォーマット

各学びは以下の形式で記録する:

### YYYY-MM-DD: 学びのタイトル

- **状況**: 何をしようとしていたか
- **問題**: 何が起きたか / 何を間違えたか
- **原因**: なぜ起きたか
- **対策**: 今後どうするか（具体的なルール）
- **関連ファイル**: 影響を受けたファイルパス（任意）

---

## 記録例

### 2025-01-15: Zustand ストアの型推論が効かない

- **状況**: Zustand v5 でストアを作成しようとした
- **問題**: `create` の型引数が正しく推論されず、アクションの型が `any` になった
- **原因**: `create<State>()(...)` のダブル呼び出しパターンを使っていなかった
- **対策**: Zustand v5 では必ず `create<State>()(impl)` パターンを使う。`project-config.md` §11 に追記済み
- **関連ファイル**: `src/stores/`

### 2025-01-20: テストで act() 警告が出る

- **状況**: React コンポーネントのユニットテストを書いていた
- **問題**: 状態更新を伴うテストで `act()` の警告が大量に出た
- **原因**: `@testing-library/react` の `userEvent` を `setup()` なしで使っていた
- **対策**: 必ず `const user = userEvent.setup()` してから `user.click()` 等を呼ぶ
- **関連ファイル**: `src/**/*.test.tsx`

---

## 学びの記録

<!-- ここにプロジェクト固有の学びを追記していく -->
