# チーム定義 — 品質保証

## 概要

実装済みコードの品質を多角的に検証するチーム。コードレビュー・セキュリティスキャン・法務チェック・E2Eテスト・パフォーマンス計測を統合的に実施する。

## 使い方

```text
.claude/teams/TEAM_QA.md <対象範囲 or QA指示>
```

引数は省略可能。省略時はPLが直近の変更（git diff）を対象範囲とする。

### 例

```text
# 対象ディレクトリ指定
.claude/teams/TEAM_QA.md src/features/assignment/

# 指示指定
.claude/teams/TEAM_QA.md 直近のPRの変更に対して品質チェック

# 特定の観点のみ
.claude/teams/TEAM_QA.md セキュリティスキャンと法務チェックのみ実施

# 引数省略
.claude/teams/TEAM_QA.md
```

## チーム構成

| 役割 | エージェント種別 | モデル | 使用スキル | 権限 |
| --- | --- | --- | --- | --- |
| **PL（リーダー）** | general-purpose | Opus | — | delegate |
| **レビュアー** | general-purpose, mode: plan | Sonnet | `code-review` | plan必須（PLが承認）、ソースコード変更不可 |
| **セキュリティアナリスト** | general-purpose, mode: plan | Sonnet | `security-scan`, `legal-check` | plan必須（PLが承認）、ソースコード変更不可 |
| **パフォーマンスエンジニア** | general-purpose | Sonnet | `performance` | plan必須（PLが承認） |
| **テスター** | general-purpose | Sonnet | `e2e-testing` | テストファイルのみ変更可 |

## 各役割の責務

### PL（リーダー）

- 品質チェック対象のスコープ（変更ファイル・機能範囲）を決定する
- TaskCreateでチェック項目をタスクリストに分解する
- 各メンバーの結果を集約し、総合品質レポートをまとめる
- 品質ゲートの通過判定を行う
- **自分で検査を実施しない**

### レビュアー

- コード変更全体のレビューを実施
- 使用スキル: `/code-review`
- 仕様準拠・コード品質・テスト品質・アーキテクチャ整合性を検証する
- 具体的な修正提案を含むレポートを出力する
- **ソースコードは変更しない**

### セキュリティアナリスト

- セキュリティ脆弱性と法務コンプライアンスの両面をチェック
- 使用スキル: `/security-scan`（脆弱性スキャン）、`/legal-check`（法務チェック）
- 依存パッケージ脆弱性、SAST、シークレット検出を実施
- OSSライセンス適合性、データ保護、知的財産権を検証
- レポートを `testreport/security/` に出力する
- **ソースコードは変更しない**

### パフォーマンスエンジニア

- パフォーマンスのボトルネックを計測・特定
- 使用スキル: `/performance`
- バンドルサイズ分析、レンダリング性能、メモリ使用量を計測
- Before/After の計測結果を提示する
- 改善が必要な場合は具体的な最適化方針を提案する
- PLの承認後に最適化を実施する

### テスター

- E2Eテストで主要ユーザーフローの動作を検証
- 使用スキル: `/e2e-testing`
- リグレッションテスト（既存機能が壊れていないか確認）を重点的に実施
- テストレポートを `testreport/e2e/` に出力する
- **テストファイルのみ作成・変更する**

## ワークフロー

```text
PL: 品質チェック対象のスコープ決定 → タスクリスト作成・割り当て
  |
  v（並行実行可能）
  +-- レビュアー: /code-review でコードレビュー → レポート提出
  +-- セキュリティアナリスト: /security-scan + /legal-check → レポート提出
  +-- テスター: /e2e-testing でE2Eテスト実行 → レポート提出
  +-- パフォーマンスエンジニア: /performance で計測 → レポート提出
  |
  v
PL: 全レポートを集約 → 総合品質レポート作成
  |
  v（問題発見時）
パフォーマンスエンジニア: 計画作成 → PL承認 → 最適化実施
  |
  v
PL: 品質ゲート判定 → 完了 or 差し戻し
```

### 依存関係ルール

| 前提条件 | 次のステップ |
| --- | --- |
| PL がスコープ決定 | レビュアー・セキュリティアナリスト・テスター・パフォーマンスエンジニアが並行開始 |
| 全レポート提出完了 | PL が総合品質レポート作成 |
| 最適化が必要な場合 | パフォーマンスエンジニアが計画作成 → PL承認 → 実施 |

## 品質レポート出力先

ツール生データは `testreport/` に、人間向けサマリーは `output/reports/` に出力する。

| レポート | ツール出力 | サマリー出力 | 担当 |
| --- | --- | --- | --- |
| コードレビュー | — | `output/reports/review/` | レビュアー |
| セキュリティスキャン | `testreport/security/` | `output/reports/security/` | セキュリティアナリスト |
| 法務チェック | — | `output/reports/legal/` | セキュリティアナリスト |
| E2Eテスト | `testreport/e2e/` | `output/reports/test/` | テスター |
| パフォーマンス計測 | — | 会話内レポート | パフォーマンスエンジニア |

## 完了条件

- [ ] レビュアー: コードレビュー完了、MUST指摘が0件
- [ ] セキュリティアナリスト: セキュリティスキャン完了、CRITICAL/HIGH脆弱性が0件
- [ ] セキュリティアナリスト: 法務チェック完了、CRITICALリスクが0件
- [ ] テスター: E2Eテスト全パス
- [ ] パフォーマンスエンジニア: パフォーマンス計測完了、閾値超過なし
- [ ] PL: 総合品質レポート作成完了

## 技術スタック参照

チーム全員が`.claude/CLAUDE.md`を読み、プロジェクトの技術スタック・規約に従うこと。
