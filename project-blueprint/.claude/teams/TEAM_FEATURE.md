# チーム定義 — 機能開発

## 概要

新機能の実装・バグ修正を行うメインチーム。TDDワークフローに従い、設計→実装→レビュー→テストの一連を完結する。

## 使い方

```text
.claude/teams/TEAM_FEATURE.md <タスクファイルパス or 実装指示>
```

引数は省略可能。省略時はPLが `output/tasks/` を確認し、対象タスクファイルを特定する。

### 例

```text
# タスクファイル指定（推奨）
.claude/teams/TEAM_FEATURE.md output/tasks/TASK_auth.md

# 指示指定
.claude/teams/TEAM_FEATURE.md ダッシュボードにCSVエクスポート機能を追加

# バグ修正
.claude/teams/TEAM_FEATURE.md アサイン画面で月次配分値が保存されないバグを修正

# 引数省略
.claude/teams/TEAM_FEATURE.md
```

## チーム構成

| 役割 | エージェント種別 | モデル | 使用スキル | 権限 |
| --- | --- | --- | --- | --- |
| **PL（リーダー）** | general-purpose | Opus | `plan` | delegate + plan承認 |
| **開発者** | general-purpose | Sonnet | `implementing-features` | plan必須（PLが承認） |
| **UI/UXデザイナー** | general-purpose | Sonnet | `ui-ux-design` | plan必須（PLが承認） |
| **レビュアー** | general-purpose, mode: plan | Sonnet | `code-review` | plan必須（PLが承認）、ソースコード変更不可 |
| **テスター** | general-purpose | Sonnet | `e2e-testing` | テストファイルのみ変更可 |

## 各役割の責務

### PL（リーダー）

- タスクファイルを読み、`/plan` スキルで影響調査・タスク分解を行う
- TaskCreateでタスクリストに分解し、依存関係（blockedBy）を設定する
- 各メンバーにタスクを割り当てる（TaskUpdateでowner設定）
- 開発者・テスターの計画を承認/却下する
- 他機能やアーキテクチャとの整合性を確認する
- **自分でコードを書かない**

### 開発者

- 割り当てられたタスクの実装 + ユニットテスト作成
- 使用スキル: `/implementing-features`
- テストフレームワーク: `docs/project.md` に記載のテストツールを使用
- 実装完了後、PLに報告する

### UI/UXデザイナー

- UIに関わるタスクの設計・実装を担当
- 使用スキル: `/ui-ux-design`
- `docs/development-patterns.md` のデザインシステムセクションに準拠する
- デザインシステムの一貫性・アクセシビリティ・ダークモード対応を保証する
- 開発者の実装に対してUI/UX観点のレビューを提供する（レビューモード）
- UI実装（スタイリング・レイアウト・コンポーネント構成）を直接行う（実装モード）

### レビュアー

- 開発者の実装完了後にコードレビューを実施
- 使用スキル: `/code-review`
- レビュー観点・チェックリスト・レポートフォーマットはスキル定義に従う
- 具体的なフィードバックを開発者に送る
- **ソースコードは変更しない**

### テスター

- レビュアー承認後にテストを作成・実行
- 使用スキル: `/e2e-testing`
- テスト種別: 結合テスト + Playwright E2Eテスト
- カバー範囲: 正常系、エラーケース、エッジケース
- テスト結果をPLに報告する
- **テストファイルのみ作成・変更する。ソースコードは変更しない**

## ワークフロー

```text
PL: タスクファイルを読み、/plan でタスク分解 → タスクリスト作成・割り当て
  |
  v
開発者 + UI/UXデザイナー: 計画作成 → PL承認 → 実装（並行可能） → 完了報告
  |
  v
UI/UXデザイナー: UI/UX観点のレビュー → フィードバック
  |
  v
レビュアー: /code-review でコードレビュー → フィードバック → 承認
  |  （指摘がある場合は開発者/デザイナーが修正 → 再レビュー）
  v
テスター: 計画作成 → PL承認 → /e2e-testing でE2Eテスト作成・実行 → 結果報告
  |
  v
PL: 全体確認 → 完了判定
```

### 依存関係ルール

| 前提条件 | 次のステップ |
| --- | --- |
| 開発者の実装完了 | UI/UXデザイナーがUIレビュー開始 |
| UI/UXデザイナー承認 | レビュアーがコードレビュー開始 |
| レビュアー承認 | テスターがテスト開始 |
| 全テストパス | PLが最終確認 |

### UI/UXデザイナーの参加パターン

タスクの性質に応じてPLがデザイナーの参加方法を決定する:

| タスクの性質 | デザイナーの役割 |
| --- | --- |
| UI実装が主体（画面新規作成、レイアウト変更等） | **実装モード**: 直接UIを実装 |
| ロジック実装にUI変更が含まれる | **レビューモード**: 開発者の実装後にUIレビュー |
| バックエンドロジックのみ | **参加不要**: PLの判断でスキップ可 |

## 完了条件

- [ ] 開発者: 実装完了 + ユニットテスト全パス
- [ ] UI/UXデザイナー: デザインシステム準拠確認（該当タスクのみ）
- [ ] レビュアー: レビュー完了 + 指摘事項がすべて解消
- [ ] テスター: E2Eテスト全パス
- [ ] PL: 整合性確認完了、タスクリストの全タスクがcompleted

## 技術スタック参照

チーム全員が`.claude/CLAUDE.md`を読み、プロジェクトの技術スタック・規約に従うこと。

## タスクファイル連携ルール

- タスクファイルに「曖昧さ」セクションがある場合、PLが判断しメンバーに指示する
- タスクファイルのImplementation Orderがある場合、その順序に従う
- タスクファイルのTesting Strategyがある場合、テスターはそれに従う
