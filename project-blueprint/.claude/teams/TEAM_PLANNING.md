# チーム定義 — 設計

## 概要

実装前の設計フェーズを担うチーム。要求メモからPRD・アーキテクチャ設計・タスク分解・UI設計を行い、実装チームへの引き継ぎドキュメントを作成する。**ソースコードは一切変更しない。**

## 使い方

```text
.claude/teams/TEAM_PLANNING.md <要求メモファイルパス or 設計指示>
```

引数は省略可能。省略時はPLが `input/requirements/` を確認し、対象ファイルを特定する。

### 例

```text
# ファイル指定（推奨）
.claude/teams/TEAM_PLANNING.md input/requirements/REQ_001.md

# 指示指定
.claude/teams/TEAM_PLANNING.md ユーザー認証機能のPRD・設計・タスク分解

# PRDから開始（要求分析をスキップ）
.claude/teams/TEAM_PLANNING.md output/prd/PRD_auth.md

# 引数省略
.claude/teams/TEAM_PLANNING.md
```

## チーム構成

| 役割 | エージェント種別 | モデル | 使用スキル | 権限 |
| --- | --- | --- | --- | --- |
| **PL（リーダー）** | general-purpose | Opus | — | delegate |
| **要件アナリスト** | general-purpose, mode: plan | Sonnet | `prd` | plan必須（PLが承認）、ソースコード変更不可 |
| **アーキテクト** | general-purpose, mode: plan | Sonnet | `architecture` | plan必須（PLが承認）、ソースコード変更不可 |
| **プランナー** | general-purpose, mode: plan | Sonnet | `plan` | plan必須（PLが承認）、ソースコード変更不可 |

## 各役割の責務

### PL（リーダー）

- 要求メモの入力ファイルを確認し、設計フェーズのスコープを決定する
- TaskCreateで設計タスクリストを作成し、依存関係を設定する
- 各メンバーの成果物をレビューし、整合性を確認する
- 曖昧な仕様の判断・解決を行う
- 成果物一式を実装チームへ引き継ぐ
- **自分で設計ドキュメントを書かない**

### 要件アナリスト

- 要求メモからPRDを生成する
- 使用スキル: `/prd <ファイルパス>`
- ユーザーストーリー・受け入れ基準・優先度を構造化する
- 曖昧な要件は「【要確認】」としてPLに報告する
- **ソースコードは変更しない**

### アーキテクト

- PRDに基づきシステムアーキテクチャを設計する
- 使用スキル: `/architecture <ファイルパス>`
- ディレクトリ構成・データモデル・依存方向ルールを設計する
- 技術選定は選択肢と根拠を提示し、PLの判断を仰ぐ
- **ソースコードは変更しない**

### プランナー

- アーキテクチャ設計に基づき、実装タスクを分解する
- 使用スキル: `/plan`
- タスク間の依存関係・並行化可能性を分析する
- テスト戦略を定義する
- 実装チーム向けのタスク分解ドキュメントを `output/tasks/PLAN_<機能名>.md` に出力する
- **ソースコードは変更しない**

## ワークフロー

```text
PL: 要求メモの確認 → 設計タスクリスト作成・割り当て
  |
  v
要件アナリスト: /prd で要求メモからPRD生成 → PLに提出
  |
  v
PL: PRDレビュー・承認
  |
  v（並行可能）
  +-- アーキテクト: /architecture でアーキテクチャ設計 → PLに提出
  +-- プランナー: /plan でタスク分解・テスト戦略定義 → PLに提出
  |
  v
PL: 成果物の整合性確認 → 実装チームへ引き継ぎ
```

### 依存関係ルール

| 前提条件 | 次のステップ |
| --- | --- |
| 要求メモの入力 | 要件アナリストがPRD生成開始 |
| PRD承認 | アーキテクト・プランナーが並行開始 |
| 全成果物完成 | PLが最終レビュー |

## 成果物

| 成果物 | 担当 | 出力先 |
| --- | --- | --- |
| PRD | 要件アナリスト | `output/prd/PRD_<機能名>.md` |
| アーキテクチャ設計書 | アーキテクト | `output/design/ARCH_<機能名>.md` |
| タスク分解・テスト戦略 | プランナー | `output/tasks/PLAN_<機能名>.md` |

## 完了条件

- [ ] 要件アナリスト: PRD生成完了、曖昧な要件がすべて解消
- [ ] アーキテクト: アーキテクチャ設計完了、技術選定が確定
- [ ] プランナー: タスク分解完了、依存関係・並行化分析完了
- [ ] PL: 全成果物の整合性確認完了

## 後続チームへの引き継ぎ

設計完了後、以下のチームにタスクファイルを引き渡す:

| 後続チーム | テンプレート | 用途 |
| --- | --- | --- |
| 機能開発チーム | `TEAM_FEATURE.md` | 機能の実装 |
| リファクタリングチーム | `TEAM_REFACTOR.md` | 構造変更が必要な場合 |

## 技術スタック参照

チーム全員が`.claude/CLAUDE.md`を読み、プロジェクトの技術スタック・規約に従うこと。
