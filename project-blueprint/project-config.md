# Project Configuration

> **人間が記入するプロジェクトパラメータファイル。**
> 技術選定・品質基準・ポリシーなど「人間が決定すべき事項」をここに集約する。
>
> **AI が管理する領域（このファイルに含めない）:**
> - ルーティング定義 → `docs/project.md` にAIが自動生成・更新
> - ストア一覧 → `docs/project.md` にAIが自動生成・更新
> - データモデル/スキーマ → `docs/data-model.md` にAIが自動生成・更新
>
> **AI によるメンテナンス:**
> 各スキル（`/implementing-features`, `/plan` 等）は設計・実装の進行に伴い、
> このファイルのセクション11（既知の落とし穴）やセクション2（技術スタック）を
> 必要に応じて更新し、`docs/` 配下との整合性を保つ。

---

## 1. プロジェクト基本情報 <!-- 必須 -->

| 項目           | 値                                   |
| -------------- | ------------------------------------ |
| プロジェクト名 | <!-- プロジェクト名を記入 -->        |
| 概要           | <!-- プロジェクトの概要を記入 -->    |
| 対応言語       | ja                                   |
| Node.js要件    | <!-- 例: 20以上 -->                  |

---

## 2. 技術スタック <!-- 必須 -->

<!-- プロジェクトで使用する技術を記入。AIが開発中にバージョン変更を追記する。 -->

| カテゴリ         | 技術                                          |
| ---------------- | --------------------------------------------- |
| フレームワーク   | <!-- 例: React 19, TypeScript 5.x, Vite 7 --> |
| スタイリング     | <!-- 例: Tailwind CSS 4, shadcn/ui -->         |
| 状態管理         | <!-- 例: Zustand 5 -->                         |
| バリデーション   | <!-- 例: Zod 3.x -->                           |
| ルーティング     | <!-- 例: React Router DOM 7 -->                |
| アイコン         | <!-- 例: lucide-react -->                      |
| コード品質       | <!-- 例: Biome 2.x / ESLint 9 -->              |
| 依存方向チェック | <!-- 例: dependency-cruiser 17 / なし -->       |
| Git Hooks        | <!-- 例: husky 9, lint-staged 16 / なし -->     |
| テスト           | <!-- 例: Vitest 4, Playwright 1.x -->          |

---

## 3. コマンド <!-- 必須 -->

<!-- プロジェクトの開発・テスト・ビルドコマンドを記入 -->

```bash
npm run dev              # 開発サーバー
npm run build            # 本番ビルド
npm run lint             # リント
npm run test             # テスト
npm run test:run         # テスト一回実行
npm run test:coverage    # カバレッジ付きテスト
# npm run e2e            # E2Eテスト（使用する場合）
# npm run depcruise      # 依存方向チェック（使用する場合）
```

---

## 4. アーキテクチャ <!-- 推奨 -->

### 4.1 パターン

<!-- 例: Feature-Sliced Design / Atomic Design / Pages-based -->

### 4.2 パスエイリアス

<!-- 例: `@/` → `src/` -->

### 4.3 ディレクトリ構成（概要）

<!-- ソースコードのディレクトリ構成を記入。詳細は docs/architecture.md にAIが生成する。 -->
<!-- 以下はFSD（Feature-Sliced Design）の例。プロジェクトのパターンに合わせて書き換えること。 -->

```text
src/
├── main.tsx               # エントリーポイント
├── App.tsx                # ルーティング定義
├── features/              # 機能モジュール
├── shared/                # 共有レイヤー
├── infrastructure/        # インフラ層
├── stores/                # 状態管理
├── test/                  # テストセットアップ
└── lib/                   # 汎用ユーティリティ
```

### 4.4 依存方向ルール

<!-- プロジェクトの依存方向ルールを記入。検出コマンドも記載する。 -->
<!-- 以下はFSD（Feature-Sliced Design）の例。プロジェクトのアーキテクチャに合わせて書き換えること。 -->

- <!-- 例: `features/X` → `features/Y` の直接依存: 禁止（shared経由で連携） -->
- <!-- 例: `shared` → `features`: 禁止 -->
- <!-- 例: `infrastructure` → `features`: 禁止 -->
- <!-- 例: `stores` → `features`: 禁止 -->
- 循環依存: 禁止
- 検出コマンド: <!-- 例: `npx depcruise src --config` -->

---

## 5. データ永続化 <!-- 任意 -->

| 項目               | 値                                             |
| ------------------ | ---------------------------------------------- |
| 戦略               | <!-- 例: localStorage / IndexedDB / REST API -->|
| ストレージキー     | <!-- 例: `app-data`（業務データ）-->            |
| マイグレーション方針 | <!-- 例: optional + デフォルト値で後方互換 --> |

---

## 6. 品質基準 <!-- 必須 -->

| 項目                 | 値         |
| -------------------- | ---------- |
| テストカバレッジ目標 | <!-- 例: 80% --> |
| TDD                  | <!-- yes / no --> |
| 品質ゲート           | <!-- yes / no --> |
| ツール出力先         | `testreport/` |
| サマリー出力先       | `output/reports/` |

### 6.1 レポート出力構成

レポートは用途に応じて2つのディレクトリに分離する:

- `testreport/` — ツールが生成する生データ（HTML/JSON/LCOV等）。`.gitignore`に追加すること
- `output/reports/` — 人間がレビューするMarkdownサマリー。Gitで管理する

```text
testreport/                    ← ツール直接出力（.gitignore対象）
├── coverage/              # ユニットテストカバレッジ（HTML/LCOV）
├── e2e/                   # Playwright E2Eテストレポート・トレース
└── security/              # セキュリティスキャンレポート（JSON/HTML）

output/reports/                ← 人間向けサマリー（Git管理）
├── review/                # コードレビュー結果
├── test/                  # テスト結果サマリー
├── security/              # セキュリティスキャンサマリー
└── legal/                 # 法務チェック結果
```

---

## 7. デザインシステム <!-- 推奨 -->

| 項目                       | 値                                         |
| -------------------------- | ------------------------------------------ |
| 参照するデザインシステム   | <!-- URL or 「なし」 -->                   |
| UIコンポーネントライブラリ | <!-- 例: shadcn/ui（Radix UI）-->          |
| アイコンライブラリ         | <!-- 例: Lucide Icons -->                  |
| アクセシビリティ基準       | <!-- 例: WCAG 2.1 AA -->                   |
| カラートークン定義ファイル | <!-- 例: src/index.css -->                 |

---

## 8. E2E テスト環境 <!-- 任意 -->

| 項目                 | 値                              |
| -------------------- | ------------------------------- |
| ブラウザ             | <!-- 例: Chromium -->           |
| ベースURL            | <!-- 例: http://localhost:5173 -->|
| テストファイル配置   | <!-- 例: e2e/ -->               |
| テストデータ注入方式 | <!-- 例: localStorage直接注入 -->|

---

## 9. Git ポリシー <!-- 任意 -->

| 項目           | 値                                           |
| -------------- | -------------------------------------------- |
| pre-commit     | <!-- 例: lint-staged（Biome check）-->       |
| pre-push       | <!-- 例: lint + 型チェック + テスト -->       |
| `--no-verify`  | 禁止                                         |
| `--force`      | 原則禁止                                     |

---

## 10. セキュリティポリシー <!-- 任意 -->

<!-- プロジェクトのセキュリティポリシーを記入 -->

- ユーザー入力は必ずバリデーション
- 依存パッケージの脆弱性は定期確認
- <!-- その他プロジェクト固有のポリシーを追記 -->

---

## 11. プロジェクト固有の注意事項 <!-- 推奨 -->

> このセクションはAIが開発中に発見した問題を追記・更新する。
> 人間が初期値を記入してもよい。

### 既知の落とし穴

<!-- 開発中に発見された問題・注意点をAIが追記する。初期値として既知の問題があれば記入。 -->

| 問題 | 原因 | 対策 |
| ---- | ---- | ---- |
| <!-- 問題の概要 --> | <!-- 根本原因 --> | <!-- 対策 --> |

### フレームワーク固有パターン

<!-- 使用するフレームワーク・ライブラリ固有の注意点を記入。AIも追記する。 -->

---

## 12. Claude Code プラグイン設定 <!-- 任意 -->

<!-- 使用するプラグインを記入。不要なものは削除する。 -->

| プラグイン        | 有効 | 用途                       |
| ----------------- | ---- | -------------------------- |
| context7          | yes  | ライブラリドキュメント参照 |
| playwright        | yes  | E2Eテスト実行・デバッグ    |
| frontend-design   | yes  | UI/UXプロトタイピング      |
| pr-review-toolkit | yes  | GitHub PR連携              |
| sentry            | no   | 本番エラー調査             |
